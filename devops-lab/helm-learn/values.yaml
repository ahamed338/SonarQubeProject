# Helm Values File
# This file contains default configuration values for your Helm chart
# Users can override these values when installing the chart:
#   helm install my-app . --set image.tag=v2.0
#
# Think of values.yaml as "default settings" that get injected into templates
# In templates/deployment.yaml, you'll see {{ .Values.image.repository }}

# Container Image Configuration
image:
  repository: sonarqube  # Docker image name
  tag: "community"  # Image tag/version
  pullPolicy: IfNotPresent  # When to pull image: Always, IfNotPresent, Never

# Application Configuration
app:
  name: sonarqube
  replicaCount: 1  # Number of pod replicas (instances of the app)
  # In production, you might set this to 3+ for high availability

# Service Configuration (how the app is exposed)
service:
  type: ClusterIP  # Kubernetes service type
  # ClusterIP: Only accessible within cluster (default)
  # NodePort: Accessible via node IP + port
  # LoadBalancer: Cloud provider creates a load balancer
  port: 9000  # Port the service listens on
  targetPort: 9000  # Port the container listens on

# Database Configuration
database:
  # In real scenarios, you'd use a managed database or separate PostgreSQL chart
  host: "postgres-service"  # Service name of PostgreSQL in Kubernetes
  port: 5432
  name: sonarqube
  username: sonar
  password: sonar123  # In production, use Kubernetes Secrets!

# Resource Limits (important for 8GB RAM MacBook)
resources:
  limits:
    cpu: 2000m  # 2 CPU cores
    memory: 2Gi  # 2 GB RAM
  requests:
    cpu: 1000m  # 1 CPU core minimum
    memory: 1Gi  # 1 GB RAM minimum

# Health Checks
livenessProbe:
  httpGet:
    path: /api/system/status
    port: 9000
  initialDelaySeconds: 60  # Wait 60s after container starts
  periodSeconds: 30  # Check every 30s

readinessProbe:
  httpGet:
    path: /api/system/status
    port: 9000
  initialDelaySeconds: 30
  periodSeconds: 10

